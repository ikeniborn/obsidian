# =============================================================================
# Notes CouchDB Environment Configuration
# =============================================================================
# This file is a template for /opt/notes/.env
# Copy this file to /opt/notes/.env and configure values
# (or run notes/setup.sh to generate automatically)

# =============================================================================
# CouchDB Credentials
# =============================================================================

# CouchDB admin user (default: admin)
COUCHDB_USER=admin

# CouchDB admin password
# SECURITY: Generate strong password with: openssl rand -hex 32
# This password is used for:
# - CouchDB admin login
# - Obsidian remote sync plugin authentication
COUCHDB_PASSWORD=changeme_generate_with_setup_script

# =============================================================================
# Notes Domain Configuration
# =============================================================================

# Subdomain for notes access (через nginx reverse proxy)
# Development: notes.localhost
# Production: notes.yourdomain.com
NOTES_DOMAIN=notes.localhost

# =============================================================================
# SSL/TLS Configuration (Let's Encrypt)
# =============================================================================

# Email для уведомлений Let's Encrypt (обязательно для production)
# Используется для:
# - Уведомлений об истечении срока действия сертификата
# - Критичных обновлений безопасности
CERTBOT_EMAIL=admin@example.com

# Использовать Let's Encrypt staging (для тестов, избегая rate limits)
# true  - staging server (тестовые сертификаты, не доверяются браузерами)
# false - production server (настоящие сертификаты)
# Рекомендация: используйте staging для первого тестирования
CERTBOT_STAGING=false

# =============================================================================
# Data Directories
# =============================================================================

# CouchDB data directory (persistent storage)
NOTES_DATA_DIR=/opt/notes/data

# Backups directory (для couchdb-backup.sh)
NOTES_BACKUP_DIR=/opt/notes/backups

# Logs directory
NOTES_LOG_DIR=/opt/notes/logs

# =============================================================================
# Network Configuration
# =============================================================================

# CouchDB port (bound to localhost only, access through nginx)
COUCHDB_PORT=5984

# =============================================================================
# S3 Backup Configuration (Optional)
# =============================================================================

# S3-compatible storage credentials
# Поддерживаются: AWS S3, Yandex Object Storage, MinIO, DigitalOcean Spaces, etc.
# Оставьте пустым если не используете S3 backups (backups будут только локальные)

S3_ACCESS_KEY_ID=your_access_key
S3_SECRET_ACCESS_KEY=your_secret_key
S3_BUCKET_NAME=obsidian-backups

# S3 Endpoint URL (зависит от провайдера):
# - Yandex Object Storage:     https://storage.yandexcloud.net
# - AWS S3 (us-east-1):         https://s3.amazonaws.com
# - AWS S3 (eu-central-1):      https://s3.eu-central-1.amazonaws.com
# - MinIO (self-hosted):        https://minio.yourdomain.com
# - DigitalOcean Spaces (NYC3): https://nyc3.digitaloceanspaces.com
S3_ENDPOINT_URL=https://storage.yandexcloud.net

# S3 Region (зависит от провайдера):
# - Yandex Object Storage:      ru-central1
# - AWS S3:                     us-east-1, eu-central-1, etc.
# - MinIO:                      us-east-1 (обычно default)
# - DigitalOcean Spaces:        nyc3, fra1, sgp1, etc.
S3_REGION=ru-central1

# S3 backup prefix (папка в bucket для организации backups)
# Например: couchdb-backups/production/
#           couchdb-backups/dev/
#           backups/notes/
S3_BACKUP_PREFIX=couchdb-backups/

# =============================================================================
# Notes
# =============================================================================
# - NEVER commit this file with real credentials
# - /opt/notes/.env is created by notes/setup.sh automatically
# - For development, use notes/dev-setup.sh (creates dev .env)
# - CouchDB accessible at: http://NOTES_DOMAIN (through nginx)
#
# S3 Configuration Examples:
#
# Yandex Object Storage:
#   S3_ENDPOINT_URL=https://storage.yandexcloud.net
#   S3_REGION=ru-central1
#
# AWS S3:
#   S3_ENDPOINT_URL=https://s3.eu-central-1.amazonaws.com
#   S3_REGION=eu-central-1
#
# MinIO (self-hosted):
#   S3_ENDPOINT_URL=https://minio.yourdomain.com
#   S3_REGION=us-east-1
